// Basic async function test with minimal operations
async fun delay(count) {
  print "Starting delay...";
  var i = 0;
  while (i < count) {
    i = i + 1;
  }
  print "Delay completed";
  return count;
}

// Main test runner function
async fun main() {
  print "=== Starting Tests ===";
  
  print "Test 1: Basic await";
  var result = await delay(1000);
  print result;
  
  print "Test 2: Multiple awaits";
  var r1 = await delay(500);
  print r1;
  var r2 = await delay(500);
  print r2;
  
  print "Test 3: Error handling";
  var x = nil;
  //x.nonexistent; // This will throw an error
 // print "This line won't be reached";
  
  print "=== Tests Complete ===";
}

// Start the test suite
print "Starting test suite...";
main();
